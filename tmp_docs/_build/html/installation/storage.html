<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Storage &mdash; Pulp Project 3.23.0.dev documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration" href="../configuration/index.html" />
    <link rel="prev" title="Instructions" href="instructions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Pulp Project
          </a>
              <div class="version">
                3.23.0.dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts and Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../from-pulp-2.html">Changes From Pulp 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation Options</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hardware-requirements.html">Hardware requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="instructions.html">Instructions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sftp">SFTP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-pulp-to-use-sftp-storage">Configuring Pulp to use SFTP storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#amazon-s3">Amazon S3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-s3">Setting up S3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-pulp-to-use-amazon-s3">Configuring Pulp to use Amazon S3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#azure-blob-storage">Azure Blob storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-azure-blob-storage">Setting up Azure Blob storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-pulp-to-use-azure-blob-storage">Configuring Pulp to use Azure Blob storage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication/index.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/index.html">Workflows and Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugin_dev/index.html">Plugin Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client_bindings.html">Client Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bugs-features.html">Bugs, Feature and Backport Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_process.html">Pulpcore Release Process</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pulp Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Installation Options</a></li>
      <li class="breadcrumb-item active">Storage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/installation/storage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="storage">
<span id="id1"></span><h1>Storage<a class="headerlink" href="#storage" title="Permalink to this heading">¶</a></h1>
<hr class="docutils" />
<blockquote>
<div><p>Pulp uses <a class="reference external" href="https://django-storages.readthedocs.io/">django-storages</a> to support multiple storage
backends. If no backend is configured, Pulp will by default use the local filesystem. If you want
to use another storage backend such as Amazon Simple Storage Service (S3), you’ll need to
configure Pulp.</p>
<p>You can also configure Pulp to use Amazon S3 and Azure storage using the Pulp installer. For more information
see the <a class="reference external" href="https://docs.pulpproject.org/pulp_installer/quickstart/#storage">Pulp installer documentation</a></p>
</div></blockquote>
<section id="sftp">
<h2>SFTP<a class="headerlink" href="#sftp" title="Permalink to this heading">¶</a></h2>
<section id="configuring-pulp-to-use-sftp-storage">
<h3>Configuring Pulp to use SFTP storage<a class="headerlink" href="#configuring-pulp-to-use-sftp-storage" title="Permalink to this heading">¶</a></h3>
<p>To use an SFTP server for pulp storage, complete the following steps:</p>
<ol class="arabic">
<li><p>Install the optional dependencies for using sftp storage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pulpcore</span><span class="p">[</span><span class="n">sftp</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">REDIRECT_TO_OBJECT_STORAGE</span></code> option to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code> configuration option to <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> configuration option to
<code class="docutils literal notranslate"><span class="pre">&quot;pulpcore.app.models.storage.PulpSFTPStorage&quot;</span></code>.</p></li>
<li><p>Configure the remaining options for <code class="docutils literal notranslate"><span class="pre">SFTPStorage</span></code> according to the
<a class="reference external" href="https://django-storages.readthedocs.io/en/latest/backends/sftp.html">django-storages documentation</a>.</p></li>
</ol>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h3>
<p>We assume that your storage server is set up to serve sftp at the hostname “sftp-storage-host”.
It provides a user named “foo” with an ssh keypair stored in “/etc/pulp/certs/storage_id_ed25519”.
In its sftp account there should be a directory named “storage” with write access for that user.
Varying names would need to be adjusted in the example below.</p>
<p>The configuration would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REDIRECT_TO_OBJECT_STORAGE</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">DEFAULT_FILE_STORAGE</span> <span class="o">=</span> <span class="s2">&quot;pulpcore.app.models.storage.PulpSFTPStorage&quot;</span>
<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">SFTP_STORAGE_HOST</span> <span class="o">=</span> <span class="s2">&quot;sftp-storage-host&quot;</span>
<span class="n">SFTP_STORAGE_ROOT</span> <span class="o">=</span> <span class="s2">&quot;/storage/&quot;</span>
<span class="n">SFTP_STORAGE_PARAMS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
    <span class="s2">&quot;key_filename&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/pulp/certs/storage_id_ed25519&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="amazon-s3">
<h2>Amazon S3<a class="headerlink" href="#amazon-s3" title="Permalink to this heading">¶</a></h2>
<section id="setting-up-s3">
<h3>Setting up S3<a class="headerlink" href="#setting-up-s3" title="Permalink to this heading">¶</a></h3>
<p>Before you can configure Amazon S3 storage to use with Pulp, ensure that you complete the following steps.
To complete these steps, consult the official Amazon S3 documentation.</p>
<ol class="arabic simple">
<li><p>Set up an AWS account.</p></li>
<li><p>Create an S3 bucket for Pulp to use.</p></li>
<li><p>In AWS Identity and Access Management (IAM), create a user that Pulp can use to access your S3 bucket.</p></li>
<li><p>Save the access key id and secret access key.</p></li>
</ol>
</section>
<section id="configuring-pulp-to-use-amazon-s3">
<h3>Configuring Pulp to use Amazon S3<a class="headerlink" href="#configuring-pulp-to-use-amazon-s3" title="Permalink to this heading">¶</a></h3>
<p>To have Pulp use S3, complete the following steps:</p>
<ol class="arabic">
<li><p>Install the optional django-storages and boto3 Python packages in the pulp virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">-</span><span class="n">storages</span><span class="p">[</span><span class="n">boto3</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Depending on which method you use to install or configure Pulp, you must set <code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> to <code class="docutils literal notranslate"><span class="pre">storages.backends.s3boto3.S3Boto3Storage</span></code> in Pulp Settings. For example, if you use the <a class="reference external" href="https://docs.pulpproject.org/pulp_installer/quickstart/">Pulp installer</a>, the <code class="docutils literal notranslate"><span class="pre">default_file_storage</span></code> is part of the <code class="docutils literal notranslate"><span class="pre">pulp_settings</span></code> Ansible variables you can define in your Ansible playbook.</p></li>
<li><p>In that same way, add your Amazon S3 configuration settings to <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code>, <code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code>, and <code class="docutils literal notranslate"><span class="pre">AWS_STORAGE_BUCKET_NAME</span></code>. For more S3 configuration options, see the <a class="reference external" href="https://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html">django-storages documents</a>.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code> configuration option. This will be the path in your bucket that Pulp will use. If you want Pulp to create its folders in the top level of the bucket, an empty string is acceptable.</p></li>
</ol>
<blockquote>
<div><p>Here is an example configuration that will use a bucket called <code class="docutils literal notranslate"><span class="pre">pulp3</span></code> that is hosted in
region <code class="docutils literal notranslate"><span class="pre">eu-central-1</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;AKIAIT2Z5TDYPX3ARJBA&#39;</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;qR+vjWPU50fCqQuUWbj9Fain/j2pV+ZtBCiDiieS&#39;</span>
<span class="n">AWS_STORAGE_BUCKET_NAME</span> <span class="o">=</span> <span class="s1">&#39;pulp3&#39;</span>
<span class="n">AWS_DEFAULT_ACL</span> <span class="o">=</span> <span class="s2">&quot;@none None&quot;</span>
<span class="n">S3_USE_SIGV4</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">AWS_S3_SIGNATURE_VERSION</span> <span class="o">=</span> <span class="s2">&quot;s3v4&quot;</span>
<span class="n">AWS_S3_ADDRESSING_STYLE</span> <span class="o">=</span> <span class="s2">&quot;path&quot;</span>
<span class="n">AWS_S3_REGION_NAME</span> <span class="o">=</span> <span class="s2">&quot;eu-central-1&quot;</span>
<span class="n">DEFAULT_FILE_STORAGE</span> <span class="o">=</span> <span class="s1">&#39;storages.backends.s3boto3.S3Boto3Storage&#39;</span>
<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<p>If the system that hosts Pulp is running in AWS and has been configured with an
<a class="reference external" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2_instance-profiles.html">instance profile</a>
that provides access to the S3 bucket you can omit the <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code> and
<code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code> parameters as the underlying <code class="docutils literal notranslate"><span class="pre">boto3</span></code> library will pick them up
automatically.</p>
<p>It is only necessary to set <code class="docutils literal notranslate"><span class="pre">AWS_DEFAULT_ACL</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;&#64;none</span> <span class="pre">None&quot;</span></code> if you have set the
<code class="docutils literal notranslate"><span class="pre">BlockPublicAcls</span></code> option in the Block Public Access settings of your bucket
or of your AWS account. The default setting in the latest version of django-storages
is <cite>public-read</cite>, which will get blocked. This is set to change in a
<a class="reference external" href="https://django-storages.readthedocs.io/en/1.7.2/backends/amazon-S3.html">future release</a>.</p>
</div></blockquote>
</section>
</section>
<section id="azure-blob-storage">
<h2>Azure Blob storage<a class="headerlink" href="#azure-blob-storage" title="Permalink to this heading">¶</a></h2>
<section id="setting-up-azure-blob-storage">
<h3>Setting up Azure Blob storage<a class="headerlink" href="#setting-up-azure-blob-storage" title="Permalink to this heading">¶</a></h3>
<p>Before you can configure Azure Blob storage to use with Pulp, ensure that you complete the following steps.
To complete these steps, consult the official Azure Blob documentation.</p>
<ol class="arabic simple">
<li><p>Set up an Azure account and create a storage account.</p></li>
<li><p>In your storage account, create a container under <cite>Blob</cite> service.</p></li>
<li><p>Obtain the access credentials so that you can later configure Pulp to access your Azure Blob storage. You can find the access credentials
at the storage account level, at Access keys (these are automatically generated).</p></li>
</ol>
</section>
<section id="configuring-pulp-to-use-azure-blob-storage">
<h3>Configuring Pulp to use Azure Blob storage<a class="headerlink" href="#configuring-pulp-to-use-azure-blob-storage" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Install the optional django-storages[azure] package in the pulp virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">-</span><span class="n">storages</span><span class="p">[</span><span class="n">azure</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Depending on which method you use to install or configure Pulp, you must set <code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> to <code class="docutils literal notranslate"><span class="pre">storages.backends.azure_storage.AzureStorage</span></code> in Pulp Settings. For example, if you use the <a class="reference external" href="https://docs.pulpproject.org/pulp_installer/quickstart/">Pulp installer</a>, the <code class="docutils literal notranslate"><span class="pre">default_file_storage</span></code> is part of the <code class="docutils literal notranslate"><span class="pre">pulp_settings</span></code> Ansible variables you can define in your Ansible playbook.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code> configuration option. This will be the path in your container that Pulp will use. If you want Pulp to create its folders in the top level of the container, an empty string is acceptable.</p></li>
<li><p>In the same way, configure the following parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AZURE_ACCOUNT_NAME</span> <span class="o">=</span> <span class="s1">&#39;Storage account name&#39;</span>
<span class="n">AZURE_CONTAINER</span> <span class="o">=</span> <span class="s1">&#39;Container name (as created within the blob service of your storage account)&#39;</span>
<span class="n">AZURE_ACCOUNT_KEY</span> <span class="o">=</span> <span class="s1">&#39;Key1 or Key2 from the access keys of your storage account&#39;</span>
<span class="n">AZURE_URL_EXPIRATION_SECS</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">AZURE_OVERWRITE_FILES</span> <span class="o">=</span> <span class="s1">&#39;True&#39;</span>
<span class="n">AZURE_LOCATION</span> <span class="o">=</span> <span class="s1">&#39;the folder within the container where your pulp objects will be stored&#39;</span>
<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><p>For a comprehensive overview of all possible options for the Azure Blob storage backend see the <a class="reference external" href="https://django-storages.readthedocs.io/en/latest/backends/azure.html">django-storages[azure] documents</a>.</p>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="instructions.html" class="btn btn-neutral float-left" title="Instructions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../configuration/index.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2023, Pulp Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74748547-2', 'auto');
  ga('send', 'pageview');

</script>


<script>
$( document ).ready( function() {

  // gets version number minus whitespace and bugfix version
  var $version_number = $('.version').text().trim().split('.', 2).join('.')

  // div mirroring the admonition-warning generated by sphinx if added to .rst
  var warning = '\
          <div class="admonition warning"> \
              <p class="first admonition-title">Warning</p> \
              <p class="last">You are looking at the docs for an unsupported version of Pulp. \
               Consider switching to a  \
               <a href="https://pulpproject.org/docs/">supported version</a></p> \
          </div>'

  
  // get JSON from server and load supported_versions
  $.getJSON("https://raw.githubusercontent.com/pulp/pulp-ci/master/ci/config/releases/supported-releases.json" , function(data) {
    if ($.inArray($version_number, data) === -1) {
      $('.rst-content').prepend(warning)
      }
    })
  })
  </script>


</body>
</html>