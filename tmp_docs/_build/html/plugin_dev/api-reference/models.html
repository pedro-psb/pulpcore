<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pulpcore.plugin.models &mdash; Pulp Project 3.23.0.dev documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pulpcore.plugin.exceptions" href="exceptions.html" />
    <link rel="prev" title="Plugin API Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Pulp Project
          </a>
              <div class="version">
                3.23.0.dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../concepts.html">Concepts and Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../from-pulp-2.html">Changes From Pulp 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authentication/index.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workflows/index.html">Workflows and Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Plugin Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#plugin-writer-s-guide">Plugin Writer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#plugin-writer-s-reference">Plugin Writer’s Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#plugin-api-reference">Plugin API Reference</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Plugin API Reference</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">pulpcore.plugin.models</a></li>
<li class="toctree-l4"><a class="reference internal" href="exceptions.html">pulpcore.plugin.exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="serializers.html">pulpcore.plugin.serializers</a></li>
<li class="toctree-l4"><a class="reference internal" href="storage.html">pulpcore.plugin.storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="viewsets.html">pulpcore.plugin.viewsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="tasking.html">pulpcore.plugin.tasking</a></li>
<li class="toctree-l4"><a class="reference internal" href="download.html">pulpcore.plugin.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="stages.html">pulpcore.plugin.stages</a></li>
<li class="toctree-l4"><a class="reference internal" href="profiling.html">Profiling the Stages API Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="content-app.html">pulpcore.plugin.content</a></li>
<li class="toctree-l4"><a class="reference internal" href="util.html">pulpcore.plugin.util</a></li>
<li class="toctree-l4"><a class="reference internal" href="index.html#pulpcore.plugin.PulpPluginAppConfig"><code class="docutils literal notranslate"><span class="pre">PulpPluginAppConfig</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rest_api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../client_bindings.html">Client Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bugs-features.html">Bugs, Feature and Backport Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_process.html">Pulpcore Release Process</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pulp Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Plugin Development</a></li>
          <li class="breadcrumb-item"><a href="index.html">Plugin API Reference</a></li>
      <li class="breadcrumb-item active">pulpcore.plugin.models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin_dev/api-reference/models.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pulpcore-plugin-models">
<h1>pulpcore.plugin.models<a class="headerlink" href="#pulpcore-plugin-models" title="Permalink to this heading">¶</a></h1>
<p>All models documented here should be imported directly from the <code class="docutils literal notranslate"><span class="pre">pulpcore.plugin.models</span></code> namespace.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">AccessPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model storing a viewset authorization policy and permission assignment of new objects created.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>creation_hooks</strong> (<em>models.JSONField</em>) – A list of dictionaries identifying callables on the
<code class="docutils literal notranslate"><span class="pre">pulpcore.plugin.access_policy.AccessPolicyFromDB</span></code> which can add user or group roles
for newly created objects. This is a nullable field due to not all endpoints creating
objects.</p></li>
<li><p><strong>statements</strong> (<em>models.JSONField</em>) – A list of <code class="docutils literal notranslate"><span class="pre">drf-access-policy</span></code> statements.</p></li>
<li><p><strong>viewset_name</strong> (<em>models.TextField</em>) – The name of the viewset this instance controls
authorization for.</p></li>
<li><p><strong>customized</strong> (<em>BooleanField</em>) – False if the AccessPolicy has been user-modified. True otherwise.
Defaults to False.</p></li>
<li><p><strong>queryset_scoping</strong> (<em>models.JSONField</em>) – A dictionary identifying a callable to perform the
queryset scoping. This field can be null if the user doesn’t want to perform scoping.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">AlternateContentSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Alternate sources of content.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>models.TextField</em>) – The alternate content source name.</p></li>
<li><p><strong>last_refreshed</strong> (<em>models.DateTimeField</em>) – Last refreshed date.</p></li>
<li><p><strong>url</strong> (<em>models.TextField</em>) – URL of Alternate Content Source.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><p><strong>remote</strong> (<em>models.ForeignKeyField</em>) – Associated remote</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">AlternateContentSourcePath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Alternate sources of content.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>models.TextField</em>) – The alternate content source name.</p>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>alternate_content_source</strong> (<em>models.ForeignKeyField</em>) – Associated AlternateContentSource</p></li>
<li><p><strong>repository</strong> (<em>models.ForeignKeyField</em>) – Associated repository</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Artifact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A file associated with a piece of content.</p>
<p>When calling <cite>save()</cite> on an Artifact, if the file is not stored in Django’s storage backend, it
is moved into place then.</p>
<p>Artifact is compatible with Django’s <cite>bulk_create()</cite> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>pulpcore.app.models.fields.ArtifactFileField</em>) – The stored file. This field should
be set using an absolute path to a temporary file.
It also accepts <cite>class:django.core.files.File</cite>.</p></li>
<li><p><strong>size</strong> (<em>models.BigIntegerField</em>) – The size of the file in bytes.</p></li>
<li><p><strong>md5</strong> (<em>models.CharField</em>) – The MD5 checksum of the file.</p></li>
<li><p><strong>sha1</strong> (<em>models.CharField</em>) – The SHA-1 checksum of the file.</p></li>
<li><p><strong>sha224</strong> (<em>models.CharField</em>) – The SHA-224 checksum of the file.</p></li>
<li><p><strong>sha256</strong> (<em>models.CharField</em>) – The SHA-256 checksum of the file (REQUIRED).</p></li>
<li><p><strong>sha384</strong> (<em>models.CharField</em>) – The SHA-384 checksum of the file.</p></li>
<li><p><strong>sha512</strong> (<em>models.CharField</em>) – The SHA-512 checksum of the file.</p></li>
<li><p><strong>timestamp_of_interest</strong> (<em>models.DateTimeField</em>) – timestamp that prevents orphan cleanup</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">before_save</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Pre-save hook that validates checksum rules prior to allowing an Artifact to be saved.</p>
<p>An Artifact with any checksums from the FORBIDDEN set will fail to save while raising
an UnsupportedDigestValidationError exception.</p>
<p>Similarly, any checksums in DIGEST_FIELDS that is NOT set will raise a
MissingDigestValidationError exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>class: <cite>~pulpcore.exceptions.UnsupportedDigestValidationError</cite>: When any of the
    keys on FORBIDDEN_DIGESTS are set for the Artifact</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>class: <cite>~pulpcore.exceptions.MissingDigestValidationError</cite>: When any of the
    keys on DIGEST_FIELDS are found to be missing from the Artifact</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_pulp_temporary_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temp_file</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Creates an Artifact from PulpTemporaryFile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An saved <code class="xref py py-class docutils literal notranslate"><span class="pre">Artifact</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">init_and_validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_digests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Initialize an in-memory Artifact from a file, and validate digest and size info.</p>
<p>This accepts both a path to a file on-disk or a
<code class="xref py py-class docutils literal notranslate"><span class="pre">PulpTemporaryUploadedFile</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">PulpTemporaryUploadedFile</span></code> or str) – The
PulpTemporaryUploadedFile to create the Artifact from or a string with the full path
to the file on disk.</p></li>
<li><p><strong>expected_digests</strong> (<em>dict</em>) – Keyed on the algorithm name provided by hashlib and stores the
value of the expected digest. e.g. {‘md5’: ‘912ec803b2ce49e4a541068d495ab570’}</p></li>
<li><p><strong>expected_size</strong> (<em>int</em>) – The number of bytes the download is expected to have.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>DigestValidationError</strong> – When any of the <code class="docutils literal notranslate"><span class="pre">expected_digest</span></code>
    values don’t match the digest of the data</p></li>
<li><p><strong>SizeValidationError</strong> – When the <code class="docutils literal notranslate"><span class="pre">expected_size</span></code> value
    doesn’t match the size of the data</p></li>
<li><p><strong>UnsupportedDigestValidationError</strong> – When any of the
    <code class="docutils literal notranslate"><span class="pre">expected_digest</span></code> algorithms aren’t in the ALLOWED_CONTENT_CHECKSUMS list</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An in-memory, unsaved <code class="xref py py-class docutils literal notranslate"><span class="pre">Artifact</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">is_equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Is equal by matching digest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>pulpcore.app.models.Artifact</em>) – A artifact to match.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True when equal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">storage_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Callable used by FileField to determine where the uploaded file should be stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Original name of uploaded file. It is ignored by this method because the
sha256 checksum is used to determine a file path instead.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">touch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Update timestamp_of_interest.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">AsciiArmoredDetachedSigningService</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model used for creating detached ASCII armored signatures.</p>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Validate a signing service for a detached ASCII armored signature.</p>
<p>The validation seeks to ensure that the sign() method returns a dict as follows:</p>
<p>{“file”: “signed_file.xml”, “signature”: “signed_file.asc”}</p>
<p>The method creates a file with some content, signs the file, and checks if the
signature can be verified by the provided public key.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – If the validation has failed.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">AutoAddObjPermsMixin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A mixin that automatically adds roles based on the <code class="docutils literal notranslate"><span class="pre">creation_hooks</span></code> data.</p>
<p>To use this mixin, your model must support <code class="docutils literal notranslate"><span class="pre">django-lifecycle</span></code>.</p>
<p>This mixin adds an <code class="docutils literal notranslate"><span class="pre">after_create</span></code> hook which properly interprets the <code class="docutils literal notranslate"><span class="pre">creation_hooks</span></code>
data and calls methods also provided by this mixin to add roles.</p>
<p>These mixing are provided by default:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_for_object_creator</span></code> will add the permissions to the creator of the object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_for_users</span></code> will add the permissions for one or more users by name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_for_groups</span></code> will add the permissions for one or more groups by name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_roles_for_object_creator</span></code> will add the roles to the creator of the object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_roles_for_users</span></code> will add the roles for one or more users by name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_roles_for_groups</span></code> will add the roles for one or more groups by name.</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add_roles_for_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Adds object-level roles for one or more groups for this newly created object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roles</strong> (<em>str</em><em> or </em><em>list</em>) – One or more object-level roles to be added for the groups. This
can either be a single role as a string, or list of role names.</p></li>
<li><p><strong>groups</strong> (<em>str</em><em> or </em><em>list</em>) – One or more groups who will receive object-level roles. This
can either be a single group name as a string or a list of group names.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ObjectDoesNotExist</strong> – If any of the groups do not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add_roles_for_object_creator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roles</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Adds object-level roles for the user creating the newly created object.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">django_currentuser.middleware.get_current_authenticated_user</span></code> returns None because
the API client did not provide authentication credentials, <em>no</em> permissions are added and
this passes silently. This allows endpoints which create objects and do not require
authorization to execute without error.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>roles</strong> (<em>list</em><em> or </em><em>str</em>) – One or more roles to be added at the object-level for the user.
This can either be a single role as a string, or list of role names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add_roles_for_users</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">users</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Adds object-level roles for one or more users for this newly created object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roles</strong> (<em>str</em><em> or </em><em>list</em>) – One or more roles to be added at object-level for the users.
This can either be a single role as a string, or a list of role names.</p></li>
<li><p><strong>users</strong> (<em>str</em><em> or </em><em>list</em>) – One or more users who will receive object-level roles. This can
either be a single username as a string or a list of usernames.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ObjectDoesNotExist</strong> – If any of the users do not exist.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">BaseModel</span></span></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">LabeledBaseModel</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A piece of managed content.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upstream_id</strong> (<em>models.UUIDField</em>) – identifier of content imported from an ‘upstream’ Pulp</p></li>
<li><p><strong>timestamp_of_interest</strong> (<em>models.DateTimeField</em>) – timestamp that prevents orphan cleanup</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><p><strong>_artifacts</strong> (<em>models.ManyToManyField</em>) – Artifacts related to Content through ContentArtifact</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">init_from_artifact_and_relative_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">artifact</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_path</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return an instance of the specific content by inspecting an artifact.</p>
<p>Plugin writers are expected to override this method with an implementation for a specific
content type.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">relative_path</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Relative path can&#39;t start with &#39;/&#39;.&quot;</span><span class="p">))</span>
<span class="k">return</span> <span class="n">FileContent</span><span class="p">(</span><span class="n">relative_path</span><span class="o">=</span><span class="n">relative_path</span><span class="p">,</span> <span class="n">digest</span><span class="o">=</span><span class="n">artifact</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>artifact</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Artifact</span></code>) – An instance of an Artifact</p></li>
<li><p><strong>relative_path</strong> (<em>str</em>) – Relative path for the content</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If relative_path starts with a ‘/’.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An un-saved instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Content</span></code> sub-class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">natural_key</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get the model’s natural key based on natural_key_fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The natural key.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">natural_key_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get the model’s natural key as a dictionary of keys and values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">natural_key_fields</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns a tuple of the natural key fields which usually equates to unique_together fields.</p>
<p>This can be overwritten in subclasses and should return a tuple of field names.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repository_types</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Tuple of the repository models that can store this content type.</p>
<p>Populated at start up time. Read only.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">touch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Update timestamp_of_interest.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">ContentArtifact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A relationship between a Content and an Artifact.</p>
<p>Serves as a through model for the ‘_artifacts’ ManyToManyField in Content.
Artifact is protected from deletion if it’s present in a ContentArtifact relationship.</p>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sort_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ca</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Static method for defining a sort-key for a specified ContentArtifact.</p>
<p>Sorting lists of ContentArtifacts is critical for avoiding deadlocks in high-concurrency
environments, when multiple workers may be operating on similar sets of content at the
same time. Providing a stable sort-order becomes problematic when the CAs in question
haven’t been persisted - in that case, pulp_id can’t be relied on, as it will change
when the object is stored in the DB and its “real” key is generated.</p>
<p>This method produces a key based on the content/artifact represented by the CA.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ca</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ContentArtifact</span></code>) – The CA we need a key for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tuple of (str(content-key), str(artifact-key)) that can be reliably sorted on</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">ContentGuard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Defines a named content guard.</p>
<p>This is meant to be subclassed by plugin authors as an opportunity to provide
plugin-specific persistent attributes and additional validation for those attributes.
The permit() method must be overridden to provide the web request authorization logic.</p>
<p>This object is a Django model that inherits from :class: <cite>pulpcore.app.models.ContentGuard</cite>
which provides the platform persistent attributes for a content-guard. Plugin authors can
add additional persistent attributes by subclassing this class and adding Django fields.
We defer to the Django docs on extending this model definition with additional fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>models.TextField</em>) – Unique guard name.</p></li>
<li><p><strong>description</strong> (<em>models.TextField</em>) – An optional description.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">permit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Authorize the specified web request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>aiohttp.web.Request</em>) – A request for a published file.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>PermissionError</strong> – When not authorized.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">ContentManager</span></span></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContentManagerFromBulkTouchQuerySet</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">ContentRedirectContentGuard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Content guard to allow preauthenticated redirects to the content app.</p>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">permit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Permit preauthenticated redirects from pulp-api.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">preauthenticate_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">salt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Add validate_token to urls query string.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">CreatedResource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Resources created by the task.</p>
<dl class="field-list simple">
<dt class="field-odd">Relations</dt>
<dd class="field-odd"><p><strong>task</strong> (<em>models.ForeignKey</em>) – The task that created the resource.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A Distribution defines how the Content App distributes a publication or repository_version.</p>
<p>This master model can be used by plugin writers to create detail Distribution objects.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> must be unique.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">base_path</span></code> must have no overlapping components. So if a Distribution with <code class="docutils literal notranslate"><span class="pre">base_path</span></code>
of <code class="docutils literal notranslate"><span class="pre">a/path/foo</span></code> existed, you could not make a second Distribution with a <code class="docutils literal notranslate"><span class="pre">base_path</span></code> of
<code class="docutils literal notranslate"><span class="pre">a/path</span></code> or <code class="docutils literal notranslate"><span class="pre">a</span></code> because both are subpaths of <code class="docutils literal notranslate"><span class="pre">a/path/foo</span></code>.</p>
<p>Subclasses are expected to use either the <code class="docutils literal notranslate"><span class="pre">publication</span></code> or <code class="docutils literal notranslate"><span class="pre">repository_version</span></code> field, but
not both. The content app that serves content is not prepared to serve content both ways at the
same time.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>models.TextField</em>) – The name of the distribution. Examples: “rawhide” and “stable”.</p></li>
<li><p><strong>pulp_labels</strong> (<em>HStoreField</em>) – Dictionary of string values.</p></li>
<li><p><strong>base_path</strong> (<em>models.TextField</em>) – The base (relative) path component of the published url.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>content_guard</strong> (<em>models.ForeignKey</em>) – An optional content-guard.</p></li>
<li><p><strong>publication</strong> (<em>models.ForeignKey</em>) – Publication to be served.</p></li>
<li><p><strong>remote</strong> (<em>models.ForeignKey</em>) – A remote that the content app can use to find content not
yet stored in Pulp.</p></li>
<li><p><strong>repository</strong> (<em>models.ForeignKey</em>) – The latest RepositoryVersion for this Repository will be
served.</p></li>
<li><p><strong>repository_version</strong> (<em>models.ForeignKey</em>) – RepositoryVersion to be served.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">content_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Handler to serve extra, non-Artifact content for this Distribution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – The path being requested</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None if there is no content to be served at path. Otherwise a
aiohttp.web_response.Response with the content.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">content_handler_list_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel_path</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Generate the directory listing entries for content_handler</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rel_path</strong> (<em>str</em>) – relative path inside the distribution’s base_path. For example,</p></li>
<li><p><strong>''</strong> (<em>the root</em><em> of </em><em>the base_path is</em>) – </p></li>
<li><p><strong>'subdir/'.</strong> (<em>a subdir within the base_path is</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Set of strings for the extra entries in rel_path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">invalidate_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Invalidates the cache if enabled.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">EncryptedTextField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A field mixin that encrypts text using settings.DB_ENCRYPTION_KEY.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_db_prep_save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return field’s value prepared for saving into a database.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Export</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model that represents an Export.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>params</strong> (<em>models.JSONField</em>) – A set of parameters used to create the export</p>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>task</strong> (<em>models.ForeignKey</em>) – The Task that created the export</p></li>
<li><p><strong>exporter</strong> (<em>models.ForeignKey</em>) – The Exporter that exported the resource.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Exporter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A base model that provides logic to export a set of content and keep track of Exports.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>models.TextField</em>) – The exporter unique name.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">FilesystemExporter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A base model that provides logic to export a set of content to the filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>models.TextField</em>) – a full path where the export will go.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span></dt>
<dd><dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">GroupProgressReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model for all progress reporting in a Task Group.</p>
<p>All progress reports have a message, code and are related to a Task Group.</p>
<p>Once a Task Group is created, plugin writers should create these objects ahead.
For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">task_group</span> <span class="o">=</span> <span class="n">TaskGroup</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Migration Sub-tasks&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_group</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">group_pr</span> <span class="o">=</span> <span class="n">GroupProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Repo migration&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">code</span><span class="o">=</span><span class="s2">&quot;create.repo_version&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">task_group</span><span class="o">=</span><span class="n">task_group</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<p>Taks that will be executing certain work, and is part of a TaskGroup, will look for
the Task group it belongs to and find appropriate progress report by its code and will
update it accordingly.</p>
<p>For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">task_group</span> <span class="o">=</span> <span class="n">TaskGroup</span><span class="o">.</span><span class="n">current</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_repo</span> <span class="o">=</span> <span class="n">task_group</span><span class="o">.</span><span class="n">group_progress_reports</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;create.repo_version&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_repo</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">done</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>To avoid race conditions/cache invalidation issues, this pattern needs to be used so that
operations are performed directly inside the database:</p>
<p>.update(done=F(‘done’) + 1)</p>
<p>See: <a class="reference external" href="https://docs.djangoproject.com/en/3.2/ref/models/expressions/#f-expressions">https://docs.djangoproject.com/en/3.2/ref/models/expressions/#f-expressions</a>
Important: F() objects assigned to model fields persist after saving the model instance and
will be applied on each save(). Do not use save() and use update() instead, otherwise
refresh_from_db() should be called after each save()</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>models.TextField</em>) – short message for the progress update, typically
shown to the user. (required)</p></li>
<li><p><strong>code</strong> (<em>models.TextField</em>) – identifies the type of progress report</p></li>
<li><p><strong>total</strong> – (models.IntegerField) The total count of items to be handled</p></li>
<li><p><strong>done</strong> (<em>models.IntegerField</em>) – The count of items already processed. Defaults to 0.</p></li>
<li><p><strong>suffix</strong> (<em>models.TextField</em>) – Customizable suffix rendered with the progress report
See <a class="reference external" href="https://github.com/verigak/progress">the docs</a>. for more info.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><p><strong>task_group</strong> – The task group associated with this group progress report.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Import</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model that represents imports into Pulp.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>params</strong> (<em>models.JSONField</em>) – A set of parameters used to run the import</p>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>task</strong> (<em>models.ForeignKey</em>) – The Task that ran the import</p></li>
<li><p><strong>importer</strong> (<em>models.ForeignKey</em>) – The Importer that imported the export</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Importer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A base model that provides logic to import data into Pulp.</p>
<p>Can be extended by plugins to provide import functionality.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>models.TextField</em>) – The importer unique name.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Model for handling resource labels.</p>
<p>Labels are key/value data that can be associated with any BaseModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pulp_id</strong> (<em>models.UUIDField</em>) – Primary key identifier</p></li>
<li><p><strong>object_id</strong> (<em>models.UUIDField</em>) – Resource id</p></li>
<li><p><strong>key</strong> (<em>models.TextField</em>) – Key of the label</p></li>
<li><p><strong>value</strong> (<em>models.TextField</em>) – Value of the label</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>content_object</strong> (<em>GenericForeignKey</em>) – Associated resource</p></li>
<li><p><strong>content_type</strong> (<em>models.ForeignKey</em>) – Content type of the resource</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">MasterModel</span></span></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">LabeledMasterModel</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">ProgressReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model for all progress reporting.</p>
<p>All progress reports have a message, state, and are related to a Task.</p>
<p>Plugin writers should create these objects to show progress reporting of a single step or
aspect of work which has a name and state. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>  <span class="c1"># default: state=&#39;waiting&#39; and done=0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;running&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>  <span class="c1"># specify the state</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">done</span><span class="o">=</span><span class="mi">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>  <span class="c1"># already completed 16</span>
</pre></div>
</div>
<p>Update the state to COMPLETED and save it:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">ProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;running&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;completed&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<p>The ProgressReport() is a context manager that provides automatic state transitions and saving
for the RUNNING CANCELED COMPLETED and FAILED states. The increment() method can be called in
the loop as work is completed. When ProgressReport() is used as a context manager progress
reporting is rate limited to every 500 milliseconds.
Use it as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">ProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">files_iterator</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">progress_bar</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># progress_bar saved as &#39;running&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files_iterator</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">handle</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">progress_bar</span><span class="o">.</span><span class="n">increment</span><span class="p">()</span>  <span class="c1"># increments and saves</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># progress_bar is saved as &#39;completed&#39; if no exception or &#39;failed&#39; otherwise</span>
</pre></div>
</div>
<p>A convenience method called iter() allows you to avoid calling increment() directly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">ProgressReport</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">files_iterator</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">progress_bar</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">files_iterator</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">handle</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use this short form which handles all necessary save() calls:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">files_iterator</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">ProgressReport</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">pb</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">pb</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">files_iterator</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">handle</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
<p>ProgressReport objects are associated with a Task and auto-discover and populate the task id
when saved.</p>
<p>When using threads to update a ProgressReport in parallel, it is recommended that all threads
share the same in-memory instance. Django does not synchronize in-memory model instances, so
multiple instances of a specific ProgressReport will diverge as they are written to from
separate threads.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>models.TextField</em>) – short message for the progress update, typically
shown to the user. (required)</p></li>
<li><p><strong>code</strong> (<em>models.TextField</em>) – identifies the type of progress report</p></li>
<li><p><strong>state</strong> (<em>models.TextField</em>) – The state of the progress update. Defaults to <cite>WAITING</cite>. This
field uses a limited set of choices of field states. See <cite>STATES</cite> for possible states.</p></li>
<li><p><strong>total</strong> – (models.IntegerField) The total count of items to be handled</p></li>
<li><p><strong>done</strong> (<em>models.IntegerField</em>) – The count of items already processed. Defaults to 0.</p></li>
<li><p><strong>suffix</strong> (<em>models.TextField</em>) – <p>Customizable suffix rendered with the progress report
See <a class="reference external" href="https://github.com/verigak/progress">the docs</a>. for more info.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><p><strong>task</strong> – The task associated with this progress report. If left unset when save() is called
it will be set to the current task_id.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">aincrease_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Increase the done count and save the progress report.</p>
<p>This will increment and save the self.done attribute which is useful to put into a loop
processing items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">aincrement</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Increment done count and save the progress report.</p>
<p>This will increment and save the self.done attribute which is useful to put into a loop
processing items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">asave</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Auto-set the task_id if running inside a task</p>
<p>If the task_id is already set it will not be updated. If it is unset and this is running
inside of a task it will be auto-set prior to saving.</p>
<p>args (list): positional arguments to be passed on to the real save
kwargs (dict): keyword arguments to be passed on to the real save</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">increase_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Increase the done count and save the progress report.</p>
<p>This will increment and save the self.done attribute which is useful to put into a loop
processing items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">increment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Increment done count and save the progress report.</p>
<p>This will increment and save the self.done attribute which is useful to put into a loop
processing items.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iter</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Iterate and automatically call increment().</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span> <span class="o">=</span> <span class="n">ProgressReport</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;Publishing files&#39;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">progress_bar</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">progress_bar</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">files_iterator</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">handle</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>iter</strong> (<em>iterator</em>) – The iterator to loop through while incrementing</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>generator of <code class="docutils literal notranslate"><span class="pre">iter</span></code> argument items</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Auto-set the task_id if running inside a task</p>
<p>If the task_id is already set it will not be updated. If it is unset and this is running
inside of a task it will be auto-set prior to saving.</p>
<p>args (list): positional arguments to be passed on to the real save
kwargs (dict): keyword arguments to be passed on to the real save</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Publication</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A publication contains metadata and artifacts associated with content
contained within a RepositoryVersion.</p>
<p>Using as a context manager is highly encouraged.  On context exit, the complete attribute
is set True provided that an exception has not been raised.  In the event and exception
has been raised, the publication is deleted.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>complete</strong> (<em>models.BooleanField</em>) – State tracking; for internal use. Indexed.</p></li>
<li><p><strong>pass_through</strong> (<em>models.BooleanField</em>) – Indicates that the publication is a pass-through
to the repository version. Enabling pass-through has the same effect as creating
a PublishedArtifact for all of the content (artifacts) in the repository.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><p><strong>repository_version</strong> (<em>models.ForeignKey</em>) – The RepositoryVersion used to
create this Publication.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">repository_version</span> <span class="o">=</span> <span class="o">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Publication</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">repository_version</span><span class="p">)</span> <span class="k">as</span> <span class="n">publication</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">repository_version</span><span class="o">.</span><span class="n">content</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">for</span> <span class="n">content_artifact</span> <span class="ow">in</span> <span class="n">content</span><span class="o">.</span><span class="n">contentartifact_set</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">artifact</span> <span class="o">=</span> <span class="n">PublishedArtifact</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">artifact</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">metadata</span> <span class="o">=</span> <span class="n">PublishedMetadata</span><span class="o">.</span><span class="n">create_from_file</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="o">...</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repository_version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pass_through</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a publication.</p>
<p>This should be used to create a publication.  Using Publication() directly
is highly discouraged.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repository_version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – The repository
version to be published.</p></li>
<li><p><strong>pass_through</strong> (<em>bool</em>) – Indicates that the publication is a pass-through
to the repository version. Enabling pass-through has the same effect
as creating a PublishedArtifact for all of the content (artifacts)
in the repository.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A created Publication in an incomplete state.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pulpcore.app.models.Publication</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Adds a Task.created_resource for the publication.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Delete the publication.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<em>dict</em>) – Delete options.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Deletes the Task.created_resource when complete is False.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">finalize_new_publication</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Finalize the incomplete Publication with plugin-provided code.</p>
<p>This method should be overridden by plugin writers for an opportunity for plugin input. This
method is intended to be used to validate or modify the content.</p>
<p>This method does not adjust the value of complete, or save the <cite>Publication</cite> itself.
Its intent is to allow the plugin writer an opportunity for plugin input before pulpcore
marks the <cite>Publication</cite> as complete.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repository</span></span></dt>
<dd><p>Return the associated repository</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The repository associated to this publication</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pulpcore.app.models.Repository</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">PublishedArtifact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An artifact that is part of a publication.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>relative_path</strong> (<em>models.TextField</em>) – The (relative) path component of the published url.</p>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>content_artifact</strong> (<em>models.ForeignKey</em>) – The referenced content artifact.</p></li>
<li><p><strong>publication</strong> (<em>models.ForeignKey</em>) – The publication in which the artifact is included.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">PublishedMetadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Metadata file that is part of a publication.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>relative_path</strong> (<em>models.TextField</em>) – The (relative) path component of the published url.</p>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><p><strong>publication</strong> (<em>models.ForeignKey</em>) – The publication in which the artifact is included.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">publication</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Creates PublishedMetadata along with Artifact, ContentArtifact, and PublishedArtifact.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>django.core.files.File</em>) – an open File that contains metadata</p></li>
<li><p><strong>publication</strong> (<em>pulpcore.app.models.Publication</em>) – The publication in which the
PublishedMetadata is included.</p></li>
<li><p><strong>relative_path</strong> (<em>str</em>) – relative path at which the Metadata is published at. If None, the
name of the ‘file’ is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A saved instance of PublishedMetadata.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>PublishedMetadata (pulpcore.app.models.PublishedMetadata)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">PulpTemporaryFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A temporary file saved to the storage backend.</p>
<p>Commonly used to pass data to one or more tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>file</strong> (<em>pulpcore.app.models.fields.ArtifactFileField</em>) – The stored file. This field should
be set using an absolute path to a temporary file.
It also accepts <cite>class:django.core.files.File</cite>.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">init_and_validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_digests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Initialize an in-memory PulpTemporaryFile from a file, and validate digest and size info.</p>
<p>This accepts both a path to a file on-disk or a
<code class="xref py py-class docutils literal notranslate"><span class="pre">PulpTemporaryUploadedFile</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">PulpTemporaryUploadedFile</span></code> or str) – The
PulpTemporaryUploadedFile to create the PulpTemporaryFile from or a string with the
full path to the file on disk.</p></li>
<li><p><strong>expected_digests</strong> (<em>dict</em>) – Keyed on the algorithm name provided by hashlib and stores the
value of the expected digest. e.g. {‘md5’: ‘912ec803b2ce49e4a541068d495ab570’}</p></li>
<li><p><strong>expected_size</strong> (<em>int</em>) – The number of bytes the download is expected to have.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>DigestValidationError</strong> – When any of the <code class="docutils literal notranslate"><span class="pre">expected_digest</span></code>
    values don’t match the digest of the data</p></li>
<li><p><strong>SizeValidationError</strong> – When the <code class="docutils literal notranslate"><span class="pre">expected_size</span></code> value
    doesn’t match the size of the data</p></li>
<li><p><strong>UnsupportedDigestValidationError</strong> – When any of the
    <code class="docutils literal notranslate"><span class="pre">expected_digest</span></code> algorithms aren’t in the ALLOWED_CONTENT_CHECKSUMS list</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An in-memory, unsaved <code class="xref py py-class docutils literal notranslate"><span class="pre">PulpTemporaryFile</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">storage_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Callable used by FileField to determine where the uploaded file should be stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Original name of uploaded file. It is ignored by this method because the
pulp_id is used to determine a file path instead.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Remote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A remote source for content.</p>
<p>This is meant to be subclassed by plugin authors as an opportunity to provide plugin-specific
persistent data attributes for a plugin remote subclass.</p>
<p>This object is a Django model that inherits from :class: <cite>pulpcore.app.models.Remote</cite> which
provides the platform persistent attributes for a remote object. Plugin authors can add
additional persistent remote data by subclassing this object and adding Django fields. We
defer to the Django docs on extending this model definition with additional fields.</p>
<p>Validation of the remote is done at the API level by a plugin defined subclass of
:class: <cite>pulpcore.plugin.serializers.repository.RemoteSerializer</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>models.TextField</em>) – The remote name.</p></li>
<li><p><strong>pulp_labels</strong> (<em>HStoreField</em>) – Dictionary of string values.</p></li>
<li><p><strong>url</strong> (<em>models.TextField</em>) – The URL of an external content source.</p></li>
<li><p><strong>ca_cert</strong> (<em>models.TextField</em>) – A PEM encoded CA certificate used to validate the
server certificate presented by the external source.</p></li>
<li><p><strong>client_cert</strong> (<em>models.TextField</em>) – A PEM encoded client certificate used
for authentication.</p></li>
<li><p><strong>client_key</strong> (<em>models.TextField</em>) – A PEM encoded private key used for authentication.</p></li>
<li><p><strong>tls_validation</strong> (<em>models.BooleanField</em>) – If True, TLS peer validation must be performed.</p></li>
<li><p><strong>proxy_url</strong> (<em>models.TextField</em>) – The optional proxy URL.
Format: scheme://host:port</p></li>
<li><p><strong>proxy_username</strong> (<em>models.TextField</em>) – The optional username to authenticate with the proxy.</p></li>
<li><p><strong>proxy_password</strong> (<em>models.TextField</em>) – The optional password to authenticate with the proxy.</p></li>
<li><p><strong>username</strong> (<em>models.TextField</em>) – The username to be used for authentication when syncing.</p></li>
<li><p><strong>password</strong> (<em>models.TextField</em>) – The password to be used for authentication when syncing.</p></li>
<li><p><strong>download_concurrency</strong> (<em>models.PositiveIntegerField</em>) – Total number of
simultaneous connections allowed to any remote during a sync.</p></li>
<li><p><strong>policy</strong> (<em>models.TextField</em>) – The policy to use when downloading content.</p></li>
<li><p><strong>total_timeout</strong> (<em>models.FloatField</em>) – Value for aiohttp.ClientTimeout.total on connections</p></li>
<li><p><strong>connect_timeout</strong> (<em>models.FloatField</em>) – Value for aiohttp.ClientTimeout.connect</p></li>
<li><p><strong>sock_connect_timeout</strong> (<em>models.FloatField</em>) – Value for aiohttp.ClientTimeout.sock_connect</p></li>
<li><p><strong>sock_read_timeout</strong> (<em>models.FloatField</em>) – Value for aiohttp.ClientTimeout.sock_read</p></li>
<li><p><strong>headers</strong> (<em>models.JSONField</em>) – Headers set on the aiohttp.ClientSession</p></li>
<li><p><strong>rate_limit</strong> (<em>models.IntegerField</em>) – Limits requests per second for each concurrent downloader</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_downloader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">remote_artifact</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Get a downloader from either a RemoteArtifact or URL that is configured with this Remote.</p>
<p>This method accepts either <cite>remote_artifact</cite> or <cite>url</cite> but not both. At least one is
required. If neither or both are passed a ValueError is raised.</p>
<p>Plugin writers are expected to override when additional configuration is needed or when
another class of download is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote_artifact</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteArtifact</span></code>) – The RemoteArtifact to
download.</p></li>
<li><p><strong>url</strong> (<em>str</em>) – The URL to download.</p></li>
<li><p><strong>download_factory</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DownloadFactory</span></code>) – The download
factory to be used.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – This accepts the parameters of
<a class="reference internal" href="download.html#pulpcore.plugin.download.BaseDownloader" title="pulpcore.plugin.download.BaseDownloader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDownloader</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If neither remote_artifact and url are passed, or if both are passed.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A downloader that
is configured with the remote settings.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>subclass of <a class="reference internal" href="download.html#pulpcore.plugin.download.BaseDownloader" title="pulpcore.plugin.download.BaseDownloader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDownloader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_remote_artifact_content_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">relative_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Get the type of content that should be available at the relative path.</p>
<p>Plugin writers are expected to implement this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>relative_path</strong> (<em>str</em>) – The relative path of a RemoteArtifact</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Class of the content type that should be available at the relative path.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Class</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_remote_artifact_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">relative_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Get the full URL for a RemoteArtifact from relative path and request.</p>
<p>This method returns the URL for a RemoteArtifact by concatenating the Remote’s url and the
relative path. Plugin writers are expected to override this method when a more complex
algorithm is needed to determine the full URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>relative_path</strong> (<em>str</em>) – The relative path of a RemoteArtifact</p></li>
<li><p><strong>request</strong> (<em>aiohttp.web.Request</em>) – The request object for this relative path</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If relative_path starts with a ‘/’.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A URL for a RemoteArtifact available at the Remote.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">invalidate_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Invalidates the cache if remote is present.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">download_factory</span></span></dt>
<dd><p>Return the DownloaderFactory which can be used to generate asyncio capable downloaders.</p>
<p>Upon first access, the DownloaderFactory is instantiated and saved internally.</p>
<p>Plugin writers are expected to override when additional configuration of the
DownloaderFactory is needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The instantiated DownloaderFactory to be used by</dt><dd><p>get_downloader().</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DownloadFactory</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">download_throttler</span></span></dt>
<dd><p>Return the Throttler which can be used to rate limit downloaders.</p>
<p>Upon first access, the Throttler is instantiated and saved internally.
Plugin writers are expected to override when additional configuration of the
DownloaderFactory is needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The instantiated Throttler to be used by get_downloader()</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Throttler</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">RemoteArtifact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Represents a content artifact that is provided by a remote (external) repository.</p>
<p>Remotes that want to support deferred download policies should use this model to store
information required for downloading an Artifact at some point in the future. At a minimum this
includes the URL, the ContentArtifact, and the Remote that created it. It can also store
expected size and any expected checksums.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>models.TextField</em>) – The URL where the artifact can be retrieved.</p></li>
<li><p><strong>size</strong> (<em>models.BigIntegerField</em>) – The expected size of the file in bytes.</p></li>
<li><p><strong>md5</strong> (<em>models.CharField</em>) – The expected MD5 checksum of the file.</p></li>
<li><p><strong>sha1</strong> (<em>models.CharField</em>) – The expected SHA-1 checksum of the file.</p></li>
<li><p><strong>sha224</strong> (<em>models.CharField</em>) – The expected SHA-224 checksum of the file.</p></li>
<li><p><strong>sha256</strong> (<em>models.CharField</em>) – The expected SHA-256 checksum of the file.</p></li>
<li><p><strong>sha384</strong> (<em>models.CharField</em>) – The expected SHA-384 checksum of the file.</p></li>
<li><p><strong>sha512</strong> (<em>models.CharField</em>) – The expected SHA-512 checksum of the file.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>content_artifact</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">pulpcore.app.models.ForeignKey</span></code>) – ContentArtifact associated with this RemoteArtifact.</p></li>
<li><p><strong>remote</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.ForeignKey</span></code>) – Remote that created the
RemoteArtifact.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">validate_checksums</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Validate if RemoteArtifact has allowed checksum or no checksum at all.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Repository</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Collection of content.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>models.TextField</em>) – The repository name.</p></li>
<li><p><strong>pulp_labels</strong> (<em>HStoreField</em>) – Dictionary of string values.</p></li>
<li><p><strong>description</strong> (<em>models.TextField</em>) – An optional description.</p></li>
<li><p><strong>next_version</strong> (<em>models.PositiveIntegerField</em>) – A record of the next version number to be
created.</p></li>
<li><p><strong>retain_repo_versions</strong> (<em>models.PositiveIntegerField</em>) – Number of repo versions to keep</p></li>
<li><p><strong>user_hidden</strong> (<em>models.BooleanField</em>) – Whether to expose this repo to users via the API</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>content</strong> (<em>models.ManyToManyField</em>) – Associated content.</p></li>
<li><p><strong>remote</strong> (<em>models.ForeignKeyField</em>) – Associated remote</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">artifacts_for_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return the artifacts for a repository version.</p>
<p>Provides a method that plugins can override since RepositoryVersions aren’t typed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – to get the artifacts for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The artifacts that are contained within this version.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>django.db.models.QuerySet</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cleanup_old_versions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Cleanup old repository versions based on retain_repo_versions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">create_initial_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Create an initial repository version (version 0).</p>
<p>This method can be overriden by plugins if they require custom logic.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">finalize_new_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_version</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Finalize the incomplete RepositoryVersion with plugin-provided code.</p>
<p>This method should be overridden by plugin writers for an opportunity for plugin input. This
method is intended to be called with the incomplete
<code class="xref py py-class docutils literal notranslate"><span class="pre">pulpcore.app.models.RepositoryVersion</span></code> to validate or modify the content.</p>
<p>This method does not adjust the value of complete, or save the <cite>RepositoryVersion</cite> itself.
Its intent is to allow the plugin writer an opportunity for plugin input before pulpcore
marks the <cite>RepositoryVersion</cite> as complete.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – The incomplete RepositoryVersion to
finalize.</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">initialize_new_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_version</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Initialize the new RepositoryVersion with plugin-provided code.</p>
<p>This method should be overridden by plugin writers for an opportunity for plugin input. This
method is intended to be called with the incomplete
<code class="xref py py-class docutils literal notranslate"><span class="pre">pulpcore.app.models.RepositoryVersion</span></code> to validate or modify the content.</p>
<p>This method does not adjust the value of complete, or save the <cite>RepositoryVersion</cite> itself.
Its intent is to allow the plugin writer an opportunity for plugin input before any other
actions performed on the new <cite>RepositoryVersion</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – The incomplete RepositoryVersion to
finalize.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">invalidate_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">everything</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Invalidates the cache if repository is present.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">latest_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get the latest RepositoryVersion on a repository</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>repository</strong> (<em>pulpcore.app.models.Repository</em>) – to get the latest version of</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The latest RepositoryVersion</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pulpcore.app.models.RepositoryVersion</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">natural_key</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get the model’s natural key.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The model’s natural key.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">new_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Create a new RepositoryVersion for this Repository</p>
<p>Creation of a RepositoryVersion should be done in a RQ Job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>repository</strong> (<em>pulpcore.app.models.Repository</em>) – to create a new version of</p></li>
<li><p><strong>base_version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – an optional repository version
whose content will be used as the set of content for the new version</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Created RepositoryVersion</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pulpcore.app.models.RepositoryVersion</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">on_new_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Called after a new repository version has been created.</p>
<p>Subclasses are expected to override this to do useful things.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> – The new repository version.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Saves Repository model and creates an initial repository version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>list</em>) – list of positional arguments for Model.save()</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – dictionary of keyword arguments to pass to Model.save()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">RepositoryContent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Association between a repository and its contained content.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>created</strong> (<em>models.DatetimeField</em>) – When the association was created.</p>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>content</strong> (<em>models.ForeignKey</em>) – The associated content.</p></li>
<li><p><strong>repository</strong> (<em>models.ForeignKey</em>) – The associated repository.</p></li>
<li><p><strong>version_added</strong> (<em>models.ForeignKey</em>) – The RepositoryVersion which added the referenced
Content.</p></li>
<li><p><strong>version_removed</strong> (<em>models.ForeignKey</em>) – The RepositoryVersion which removed the referenced
Content.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">RepositoryVersion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A version of a repository’s content set.</p>
<p>Plugin Writers are strongly encouraged to use RepositoryVersion as a context manager to provide
transactional safety, working directory set up, plugin finalization, and cleaning up the
database on failures.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">repository</span><span class="o">.</span><span class="n">new_version</span><span class="p">(</span><span class="n">repository</span><span class="p">)</span> <span class="k">as</span> <span class="n">new_version</span><span class="p">:</span>
    <span class="n">new_version</span><span class="o">.</span><span class="n">add_content</span><span class="p">(</span><span class="n">content_q</span><span class="p">)</span>
    <span class="n">new_version</span><span class="o">.</span><span class="n">remove_content</span><span class="p">(</span><span class="n">content_q</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number</strong> (<em>models.PositiveIntegerField</em>) – A positive integer that uniquely identifies a version
of a specific repository. Each new version for a repo should have this field set to
1 + the most recent version.</p></li>
<li><p><strong>complete</strong> (<em>models.BooleanField</em>) – If true, the RepositoryVersion is visible. This field is set
to true when the task that creates the RepositoryVersion is complete.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>repository</strong> (<em>models.ForeignKey</em>) – The associated repository.</p></li>
<li><p><strong>base_version</strong> (<em>models.ForeignKey</em>) – The repository version this was created from.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Add a content unit to this version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>content</strong> (<em>django.db.models.QuerySet</em>) – Set of Content to add</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>pulpcore.exception.ResourceImmutableError</strong> – if add_content is called on a
    complete RepositoryVersion</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">added</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>base_version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – an optional repository version</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Content objects that were added by this version.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>QuerySet</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">contains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Check whether a content exists in this repository version’s set of content</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the repository version contains the content, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">content_batch_qs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_qs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_by_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('pk',)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Generate content batches to efficiently iterate over all content.</p>
<p>Generates query sets that span the <cite>content_qs</cite> content of the repository
version. Each yielded query set evaluates to at most <cite>batch_size</cite> content records.
This is useful to limit the memory footprint when iterating over all content of
a repository version.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This generator is not safe against changes (i.e. add/remove content) during
the iteration!</p></li>
<li><p>As the method uses slices internally, the queryset must be ordered to yield
stable results. By default, it is ordered by primary key.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content_qs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.QuerySet</span></code>) – The queryset for Content that will be
restricted further to the content present in this repository version. If not given,
<code class="docutils literal notranslate"><span class="pre">Content.objects.all()</span></code> is used (to iterate over all content present in the
repository version). A plugin may want to use a specific subclass of
<code class="xref py py-class docutils literal notranslate"><span class="pre">Content</span></code> or use e.g. <code class="docutils literal notranslate"><span class="pre">filter()</span></code> to select
a subset of the repository version’s content.</p></li>
<li><p><strong>order_by_params</strong> (<em>tuple</em><em> of </em><em>str</em>) – The parameters for the <code class="docutils literal notranslate"><span class="pre">order_by</span></code> clause
for the content. The Default is <code class="docutils literal notranslate"><span class="pre">(&quot;pk&quot;,)</span></code>. This needs to
specify a stable order. For example, if you want to iterate by
decreasing creation time stamps use <code class="docutils literal notranslate"><span class="pre">(&quot;-pulp_created&quot;,</span> <span class="pre">&quot;pk&quot;)</span></code> to
ensure that content records are still sorted by primary key even
if their creation timestamp happens to be equal.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em>) – The maximum batch size.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.QuerySet</span></code> – A QuerySet representing a slice of the content.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following code could be used to loop over all <code class="docutils literal notranslate"><span class="pre">FileContent</span></code> in
<code class="docutils literal notranslate"><span class="pre">repository_version</span></code>. It prefetches the related
<code class="xref py py-class docutils literal notranslate"><span class="pre">ContentArtifact</span></code> instances for every batch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repository_version</span> <span class="o">=</span> <span class="o">...</span>

<span class="n">batch_generator</span> <span class="o">=</span> <span class="n">repository_version</span><span class="o">.</span><span class="n">content_batch_qs</span><span class="p">(</span>
    <span class="n">content_class</span><span class="o">=</span><span class="n">FileContent</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">content_batch_qs</span> <span class="ow">in</span> <span class="n">batch_generator</span><span class="p">:</span>
    <span class="n">content_batch_qs</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="s2">&quot;contentartifact_set&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">content_batch_qs</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Deletes a RepositoryVersion</p>
<p>If RepositoryVersion is complete and has a successor, squash RepositoryContent changes into
the successor. If version is incomplete, delete and and clean up RepositoryContent,
CreatedResource, and Repository objects.</p>
<p>Deletion of a complete RepositoryVersion should be done in a RQ Job.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_qs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Returns a set of content for a repository version</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>content_qs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">django.db.models.QuerySet</span></code>) – The queryset for Content that will be
restricted further to the content present in this repository version. If not given,
<code class="docutils literal notranslate"><span class="pre">Content.objects.all()</span></code> is used (to return over all content types present in the
repository version).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The content that is contained within this version.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>django.db.models.QuerySet</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">repository_version</span> <span class="o">=</span> <span class="o">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Return a queryset of File objects in the repository</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">repository_version</span><span class="o">.</span><span class="n">get_content</span><span class="p">(</span><span class="n">content_qs</span><span class="o">=</span><span class="n">File</span><span class="o">.</span><span class="n">objects</span><span class="p">)):</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The next complete RepositoryVersion for the same</dt><dd><p>repository.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pulpcore.app.models.RepositoryVersion</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RepositoryVersion.DoesNotExist</strong> – if there is not a RepositoryVersion for the same
    repository and with a higher “number”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">previous</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>The previous complete RepositoryVersion for the</dt><dd><p>same repository.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pulpcore.app.models.RepositoryVersion</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RepositoryVersion.DoesNotExist</strong> – if there is not a RepositoryVersion for the same
    repository and with a lower “number”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">remove_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Remove content from the repository.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>content</strong> (<em>django.db.models.QuerySet</em>) – Set of Content to remove</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>pulpcore.exception.ResourceImmutableError</strong> – if remove_content is called on a
    complete RepositoryVersion</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">removed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>base_version</strong> (<em>pulpcore.app.models.RepositoryVersion</em>) – an optional repository version</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Content objects that were removed by this version.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>QuerySet</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets the repo version content by calling remove_content() then add_content().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>content</strong> (<em>django.db.models.QuerySet</em>) – Set of desired content</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>pulpcore.exception.ResourceImmutableError</strong> – if set_content is called on a
    complete RepositoryVersion</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">artifacts</span></span></dt>
<dd><p>Returns a set of artifacts for a repository version.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The artifacts that are contained within this version.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>django.db.models.QuerySet</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content</span></span></dt>
<dd><p>Returns a set of content for a repository version</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The content that is contained within this version.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>django.db.models.QuerySet</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">repository_version</span> <span class="o">=</span> <span class="o">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">repository_version</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">cast</span><span class="p">()</span>  <span class="c1"># optional downcast.</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">FileContent</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk__in</span><span class="o">=</span><span class="n">repository_version</span><span class="o">.</span><span class="n">content</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">SigningService</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A model used for producing signatures.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>models.TextField</em>) – A unique name describing a script (or executable) used for signing.</p></li>
<li><p><strong>public_key</strong> (<em>models.TextField</em>) – The value of the public key.</p></li>
<li><p><strong>script</strong> (<em>models.TextField</em>) – An absolute path to an external signing script (or executable).</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Async version of sign.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Save a signing service to the database (unless it fails to validate).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">sign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Signs the file provided via ‘filename’ by invoking an external script (or executable).</p>
<p>The external script is run as a subprocess. This is done in the expectation that the script
has been validated as an external signing service by the validate() method. This validation
is currently only done when creating the signing service object, but not at the time of use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – A relative path to a file which is intended to be signed.</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em>) – dictionary of environment variables</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – If the return code of the script is not equal to 0.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary as validated by the validate() method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Ensure that the external signing script produces the desired behaviour.</p>
<p>With desired behaviour we mean the behaviour as validated by this method. Subclasses are
required to implement this method. Works by calling the sign() method on some test data, and
verifying that any desired signatures/signature files are returned and are valid. Must also
enforce the desired return value format of the sign() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – If the script failed to produce the desired outcome for the test data.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Represents a task</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>models.TextField</em>) – The state of the task</p></li>
<li><p><strong>name</strong> (<em>models.TextField</em>) – The name of the task</p></li>
<li><p><strong>logging_cid</strong> (<em>models.TextField</em>) – The logging CID associated with the task</p></li>
<li><p><strong>started_at</strong> (<em>models.DateTimeField</em>) – The time the task started executing</p></li>
<li><p><strong>finished_at</strong> (<em>models.DateTimeField</em>) – The time the task finished executing</p></li>
<li><p><strong>error</strong> (<em>models.JSONField</em>) – Fatal errors generated by the task</p></li>
<li><p><strong>args</strong> (<em>models.JSONField</em>) – The JSON serialized arguments for the task</p></li>
<li><p><strong>kwargs</strong> (<em>models.JSONField</em>) – The JSON serialized keyword arguments for
the task</p></li>
<li><p><strong>reserved_resources_record</strong> (<em>django.contrib.postgres.fields.ArrayField</em>) – The reserved
resources required for the task.</p></li>
</ul>
</dd>
<dt class="field-even">Relations</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>parent</strong> (<em>models.ForeignKey</em>) – Task that spawned this task (if any)</p></li>
<li><p><strong>worker</strong> (<em>models.ForeignKey</em>) – The worker that this task is in</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">current</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The current task.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pulpcore.app.models.Task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">refresh_from_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">using</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Reload field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn’t loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_canceled</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">final_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'canceled'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Set this task to canceled or failed from canceling.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_canceling</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Set this task to canceling from either waiting, running or canceling.</p>
<p>This is the only valid transition without holding the task lock.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_completed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Set this Task to the completed state, save it, and log output in warning cases.</p>
<p>This updates the <code class="xref py py-attr docutils literal notranslate"><span class="pre">finished_at</span></code> and sets the <code class="xref py py-attr docutils literal notranslate"><span class="pre">state</span></code> to <code class="xref py py-attr docutils literal notranslate"><span class="pre">COMPLETED</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_failed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tb</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Set this Task to the failed state and save it.</p>
<p>This updates the <code class="xref py py-attr docutils literal notranslate"><span class="pre">finished_at</span></code> attribute, sets the <code class="xref py py-attr docutils literal notranslate"><span class="pre">state</span></code> to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">FAILED</span></code>, and sets the <code class="xref py py-attr docutils literal notranslate"><span class="pre">error</span></code> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exc</strong> (<em>Exception</em>) – The exception raised by the task.</p></li>
<li><p><strong>tb</strong> (<em>traceback</em>) – Traceback instance for the current exception.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">set_running</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Set this Task to the running state, save it, and log output in warning cases.</p>
<p>This updates the <code class="xref py py-attr docutils literal notranslate"><span class="pre">started_at</span></code> and sets the <code class="xref py py-attr docutils literal notranslate"><span class="pre">state</span></code> to <code class="xref py py-attr docutils literal notranslate"><span class="pre">RUNNING</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">TaskGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pulp_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pulp_created</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pulp_last_updated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_tasks_dispatched</span></span></em><span class="sig-paren">)</span></dt>
<dd><dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">current</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The task group the current task is being executed and
belongs to.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pulpcore.app.models.TaskGroup</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Finalize the task group.</p>
<p>Set ‘all_tasks_dispatched’ to True so that API users can know that there are no
tasks in the group yet to be created.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">Upload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A chunked upload. Stores chunks until used to create an artifact, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>models.BigIntegerField</em>) – The size of the file in bytes.</p>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sha256</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Append a chunk to an upload.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>chunk</strong> (<em>File</em>) – Binary data to append to the upload file.</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – First byte position to write chunk to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pulpcore.plugin.models.</span></span><span class="sig-name descname"><span class="pre">UploadChunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A chunk for an uploaded file.</p>
<dl class="field-list simple">
<dt class="field-odd">Fields</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>fields.FileField</em>) – A file where the uploaded chunk is stored.</p></li>
<li><p><strong>upload</strong> (<em>models.ForeignKey</em>) – Upload this chunk belongs to.</p></li>
<li><p><strong>offset</strong> (<em>models.BigIntegerField</em>) – Start of the chunk in bytes.</p></li>
<li><p><strong>size</strong> (<em>models.BigIntegerField</em>) – Size of the chunk in bytes.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DoesNotExist</span></span></dt>
<dd></dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultipleObjectsReturned</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">storage_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Callable used by FileField to determine where the uploaded file should be stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Original name of uploaded file. It is ignored by this method because the
pulp_id is used to determine a file path instead.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Plugin API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="exceptions.html" class="btn btn-neutral float-right" title="pulpcore.plugin.exceptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2023, Pulp Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74748547-2', 'auto');
  ga('send', 'pageview');

</script>


<script>
$( document ).ready( function() {

  // gets version number minus whitespace and bugfix version
  var $version_number = $('.version').text().trim().split('.', 2).join('.')

  // div mirroring the admonition-warning generated by sphinx if added to .rst
  var warning = '\
          <div class="admonition warning"> \
              <p class="first admonition-title">Warning</p> \
              <p class="last">You are looking at the docs for an unsupported version of Pulp. \
               Consider switching to a  \
               <a href="https://pulpproject.org/docs/">supported version</a></p> \
          </div>'

  
  // get JSON from server and load supported_versions
  $.getJSON("https://raw.githubusercontent.com/pulp/pulp-ci/master/ci/config/releases/supported-releases.json" , function(data) {
    if ($.inArray($version_number, data) === -1) {
      $('.rst-content').prepend(warning)
      }
    })
  })
  </script>


</body>
</html>